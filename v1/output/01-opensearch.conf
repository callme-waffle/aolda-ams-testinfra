# OUTPUT - OpenSearch / TEST
<match **>
  @type opensearch
  host 172.16.10.11
  port 9200
  scheme http
  logstash_format true
  logstash_prefix flog
  reconnect_on_error true
  retry_tag retry_os
  request_timeout 60s
  suppress_type_name true
  bulk_message_request_threshold 20M
  <buffer>
    @type file
    path /var/lib/fluentd/data/aolda.opensearch.buffer/openstack.*
    flush_interval 15s
    chunk_limit_size 8M
  </buffer>
</match>


# Retry handler for OpenSearch
<match retry_os>
  @type opensearch
  host 172.16.10.11
  port 9200
  scheme http
  logstash_format true
  logstash_prefix flog
  reconnect_on_error true
  request_timeout 60s
  suppress_type_name true
  bulk_message_request_threshold 20M
  <buffer>
    @type file
    path /var/lib/fluentd/data/aolda.opensearch.buffer/openstack_retry.*
    flush_interval 15s
    chunk_limit_size 8M
  </buffer>
</match>

