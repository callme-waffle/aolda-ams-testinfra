# Extract service name from tag and add metadata for OpenStack services
<filter kolla.var.log.kolla.*.*.log>
  @type record_transformer
  <record>
    Hostname ${hostname}
    Logger openstack.${tag_parts[4]}
    programname ${tag_parts[5]}
    type info
    level lv1
    source ${tag_parts[4]}
  </record>
</filter>

# Add metadata for infrastructure services
<filter infra.**>
  @type record_transformer
  <record>
    Hostname ${hostname}
    programname ${tag_parts[1]}
    type info
    level lv0
    source ${tag_parts[1]}
  </record>
</filter>

# Add metadata for syslog
<filter syslog.**>
  @type record_transformer
  <record>
    type info
    level lv0
    source syslog
  </record>
</filter>

# Add metadata for systemd journal
<filter journal.**>
  @type record_transformer
  <record>
    type info
    level lv0
    source systemd
  </record>
</filter>

